ezpublishvol:
  image: debian:jessie
  volumes:
   - ./volumes/ezpublish:/var/www
  # Remove .keep file so composer is able to install in the directory afterwards
  command: rm /var/www/.keep

composercachevol:
  image: debian:jessie
  volumes:
   - ./volumes/composercache:/var/.composer/cache

ezphp:
  image: ezsystems/ezphp
  volumes_from:
   - ezpublishvol
   - composercachevol
  volumes:
   - ./files/auth.json:/var/.composer/auth.json
   - ./files/kickstart_template.ini:/kickstart_template.ini
   # Override command, we don't want to start php-fpm just yet, just want to run composer command
   # That is done in ezpinstall.sh since it needs env variables (todo: fix when on Compose 1.4)
  command: php -v
